;/*FB_PKG_DELIM*/

__d("LSAppendDataTraceAddon",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.db.table(154).add({addonId:void 0,traceId:e[0],timestampMs:n[0],checkPointId:e[1],syncChannel:e[2],errorMessage:e[3],tags:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSDataTraceAppendDataTraceAddonStoredProcedure",e.__tables__=["data_trace_addon"],a.exports=e}),null);
__d("LSVec",[],(function(t,n,r,o,a,i){"use strict";var e={tag:{value:"ls-array"}};function l(t){return Object.defineProperties([].concat(t),e)}function s(e){return l(e)}function u(e){return Array.from(e)}var c={from:l,ofArray:s,toArray:u};i.default=c}),66);
__d("LSDict",["FBLogger","I64","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){if(t!=null){var n=(e||(e=o("I64"))).cast(t);return n!=null?JSON.stringify([(e||(e=o("I64"))).to_string(n)]):JSON.stringify(t)}}function u(t){if(t!=null){var n=JSON.parse(t);return Array.isArray(n)?(e||(e=o("I64"))).of_string(n[0]):n}}var c=(function(){function e(e){this.size=0;var t=new Map(Array.from(e||[]).map(function(e){var t=e[0],n=e[1];return t==null?null:[s(t),n]}).filter(Boolean));this.$1=t,Object.defineProperties(this,{size:{get:function(){return t.size}}})}var t=e.prototype;return t.get=function(t){if(t!=null)return this.$1.get(s(t))},t.set=function(t,n){return t==null?this:(this.$1.set(s(t),n),this)},t.delete=function(t){return t==null?!1:this.$1.delete(s(t))},t.clear=function(){return this.$1.clear()},t.forEach=function(t){var e=this;this.$1.forEach(function(n,r){return t(n,u(r),e)})},t.has=function(t){return t==null?!1:this.$1.has(s(t))},t.entries=function*(){for(var e of this.$1.entries()){var t=e[0],n=e[1];yield[u(t),n]}},t.keys=function(){return r("LSVec").from(Array.from(this.$1.keys()).map(function(e){return u(e)}))},t.values=function(){return this.$1.values()},e.fromObject=function(n){return new e(Object.entries(n))},e.shapeToRecord=function(t){return Array.from(t.entries()).reduce(function(e,t){var n,o=t[0],a=t[1];if(typeof o!="string")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert dicts with mixed keys to records");return babelHelpers.extends({},e,(n={},n[o]=a,n))},{})},e})();l.default=c}),98);
__d("LSFlushSyncTrace",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(153).fetch(),function(n){return t.i64.eq(n.traceType,t.i64.cast([0,2]))&&n.contextOne===e[1]&&n.contextThree===e[0]}),function(e){var t=e.update,n=e.item;return t({shouldFlush:!0})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSDataTraceFlushSyncTraceStoredProcedure",e.__tables__=["data_trace_meta"],a.exports=e}),null);
__d("LSExecuteFinallyBlockForSyncTransaction",["LSFlushSyncTrace"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(3).fetch([[["",e[1]]]]),function(n){return n.taskQueueName===""&&t.i64.eq(n.syncDatabaseId,e[1])&&t.i64.eq(n.epochId,e[2])}),function(n){var r=n.update,o=n.item;return r({epochId:!e[0]&&t.i64.eq(o.failureCount,t.i64.cast([-1,4294967295]))?o.epochId:void 0,failureCount:t.i64.eq(o.failureCount,t.i64.cast([-1,4294967295]))?t.i64.cast([0,0]):t.i64.add(o.failureCount,t.i64.cast([0,1]))})})},function(e){return t.resolve()}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreExecuteFinallyBlockForSyncTransactionStoredProcedure",e.__tables__=["network_requests"],a.exports=e}),null);
__d("LSSyncError",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t,n){e.set(t,n)}function s(t){return e.get(t)}function u(){e.clear()}i.setSyncError=l,i.getLastSyncError=s,i.clearSyncErrors=u}),66);
__d("MAWMIC",["Promise","cr:4747","cr:9378"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e=n("cr:9378"))!=null?e:n("cr:4747");function c(e,t){u==null||u.fail(e,t)}function d(e,t){u==null||u.cancel(e,t)}function m(e,t){u==null||u.addPoint(e,t)}function p(e,t){u==null||u.addBoolAnnotation(e,t)}function _(e,t){u==null||u.addIntAnnotation(e,t)}function f(e,t){u==null||u.addStringAnnotation(e,t)}function g(e,t){u==null||u.addStringArrayAnnotation(e,t)}function h(e,t){u==null||u.addIntArrayAnnotation(e,t)}function y(){return(u==null?void 0:u.duringMIC())===!0}function C(){var e;return(e=u==null?void 0:u.endReasonMIC())!=null?e:"end_reason_not_available"}function b(){u==null||u.onConnectToExistingWorker()}function v(){u==null||u.startMAWMICFlow()}function S(){var e;return(e=u==null?void 0:u.getState())!=null?e:(s||(s=n("Promise"))).resolve(void 0)}l.fail=c,l.cancel=d,l.addPoint=m,l.addBoolAnnotation=p,l.addIntAnnotation=_,l.addStringAnnotation=f,l.addStringArrayAnnotation=g,l.addIntArrayAnnotation=h,l.duringMIC=y,l.endReasonMIC=C,l.onConnectToExistingWorker=b,l.startMAWMICFlow=v,l.getState=S}),98);
__d("LSLogEventAnnotate.nop",["FBLogger","I64","LSDict","LSIntEnum","LSSyncError","LSSynchronousPromise","MAWMIC"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n,a,i,l,u,c){var t=c.has("error_msg");if(t){r("FBLogger")("messenger_web").warn("[LS] LS log event for logCategory %s, logEventId %s, logEventInstanceId %s, annotations %s, is during MIC: %s",(e||(e=o("I64"))).to_string(i),e.to_string(l),e.to_string(u),JSON.stringify(r("LSDict").shapeToRecord(c)),o("MAWMIC").duringMIC());var d=c.get("database_id");d!=null&&(e||(e=o("I64"))).isI64(d)&&o("LSSyncError").setSyncError((s||(s=o("LSIntEnum"))).unwrapIntEnum(d),c)}return o("LSSynchronousPromise").makeSynchronousPromise()};u.__nop_name__="LSLogEventAnnotate",l.default=u}),98);
__d("LSExecuteFirstBlockForSyncTransaction",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSLogEventAnnotate.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.resolve()},function(o){return t.filter(t.db.table(3).fetch([[["",e[0]]]]),function(n){return n.taskQueueName===""&&t.i64.eq(n.syncDatabaseId,e[0])&&t.i64.eq(n.epochId,e[1])}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return t.db.table(3).fetch([[["",e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[2]=void 0:(t=o.item,r[2]=t.epochId)})},function(o){return r[4]=",",(function(e){t.logger(e).mustfix(e)})(["epoch mismatch",r[4]," db_type=",r[4],t.i64.to_string(e[0]),r[4]," previous_cursor=",r[4],e[2]==null?"null":e[2],r[4]," next_cursor=",r[4],e[3],r[4]," server_epoch_id=",r[4],t.i64.to_string(e[1]),r[4]," client_epoch_id=",r[4],r[2]==null?"null":r[2]].join("")),r[5]=new t.Map,r[5].set("database_id",e[0]),r[5].set("epoch_id",e[1]),r[5].set("sync_status",e[4]),r[5].set("next_cursor",e[3]),r[5].set("error_msg","epoch mismatch"),e[9]?r[6]=!1:r[6]=!0,r[6]?t.resolve():(r[8]=e[9].keys(),r[9]=t.i64.of_int32(r[8].length),t.i64.gt(r[9],t.i64.cast([0,0]))?t.loopAsync(r[9],function(o){return r[10]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[8],r[10]).then(function(e){var t;return t=e,r[11]=t[0],r[12]=t[1],t})},function(t){return r[13]=e[9].get(r[11]),r[5].set(r[11],r[13])}])}):t.resolve())},function(e){return t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,35]),t.i64.cast([0,0]),r[5])},function(e){return r[7]=!1,r[0]=r[7]}]):(a=l.item,t.sequence([function(o){return t.filter(t.db.table(1).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.groupId,e[0])&&n.currentCursor===e[2]}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return t.db.table(3).fetch([[["",e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[4]=void 0:(t=o.item,r[4]=t.epochId)})},function(o){return r[6]=",",(function(e){t.logger(e).mustfix(e)})(["cursor mismatch",r[6]," db_type=",r[6],t.i64.to_string(e[0]),r[6]," previous_cursor=",r[6],e[2]==null?"null":e[2],r[6]," next_cursor=",r[6],e[3],r[6]," server_epoch_id=",r[6],t.i64.to_string(e[1]),r[6]," client_epoch_id=",r[6],r[4]==null?"null":r[4]].join("")),r[7]=new t.Map,r[7].set("database_id",e[0]),r[7].set("epoch_id",e[1]),r[7].set("sync_status",e[4]),r[7].set("next_cursor",e[3]),r[7].set("error_msg","cursor mismatch"),e[9]?r[8]=!1:r[8]=!0,r[8]?t.resolve():(r[10]=e[9].keys(),r[11]=t.i64.of_int32(r[10].length),t.i64.gt(r[11],t.i64.cast([0,0]))?t.loopAsync(r[11],function(o){return r[12]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[10],r[12]).then(function(e){var t;return t=e,r[13]=t[0],r[14]=t[1],t})},function(t){return r[15]=e[9].get(r[13]),r[7].set(r[13],r[15])}])}):t.resolve())},function(e){return t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,35]),t.i64.cast([0,0]),r[7])},function(e){return r[9]=!1,r[2]=r[9]}]):(a=l.item,t.sequence([function(n){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(n){var o=n.update,a=n.item;return o({currentCursor:e[3],syncStatus:e[4],sendSyncParams:e[5],minTimeToSyncTimestampMs:t.i64.eq(e[6],t.i64.cast([0,0]))?t.i64.cast([0,0]):t.i64.add(r[4],e[6]),canIgnoreTimestamp:e[7],syncChannel:e[8],lastSyncCompletedTimestampMs:r[5]})})},function(n){return t.forEach(t.db.table(3).fetch([[["",e[0]]]]),function(e){var n=e.update,r=e.item;return n({failureCount:t.i64.cast([-1,4294967295])})})},function(o){return r[6]=new t.Map,r[6].set("database_id",e[0]),r[6].set("epoch_id",e[1]),r[6].set("sync_status",e[4]),r[6].set("next_cursor",e[3]),e[9]?r[7]=!1:r[7]=!0,r[7]?t.resolve():(r[9]=e[9].keys(),r[10]=t.i64.of_int32(r[9].length),t.i64.gt(r[10],t.i64.cast([0,0]))?t.loopAsync(r[10],function(o){return r[11]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],r[11]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(t){return r[14]=e[9].get(r[12]),r[6].set(r[12],r[14])}])}):t.resolve())},function(e){return t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,35]),t.i64.cast([0,0]),r[6])},function(e){return r[8]=!0,r[2]=r[8]}]))})},function(e){return r[0]=r[2]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreExecuteFirstBlockForSyncTransactionStoredProcedure",e.__tables__=["data_trace_meta","network_requests","sync_groups"],a.exports=e}),null);
__d("LSGetCursor",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(1).fetch([[[e[0]]]]).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=void 0:(t=o.item,n[0]=t.currentCursor)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreGetCursorStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSGetFirstAvailableAttachmentCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.db.table(19).fetchDesc().next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxGetFirstAvailableAttachmentCTAIDStoredProcedure",e.__tables__=["attachment_ctas"],a.exports=e}),null);
__d("LSGetViewerFBID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.db.table(4).fetch([[[t.i64.cast([0,1])]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([-1,4294967295]):(r=a.item,n[0]=r.facebookUserId)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreGetViewerFBIDStoredProcedure",e.__tables__=["_user_info"],a.exports=e}),null);
__d("LSIssueNewTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return n[0]=t.i64.cast([0,0]),n[2]=t.i64.to_string(e[1]),n[1]=t.i64.of_float(Date.now()),t.db.table(2).add({taskId:void 0,queueName:e[0],context:n[2],taskValue:e[2],enqueueTimestampMs:n[1],httpUrlOverride:e[3],timeoutTimestampMs:e[4],pluginType:e[5],priority:e[6],syncGroupId:e[7],transportKey:e[8],minTimeToSyncTimestampMs:e[9],taskDispatchPriority:n[0]})},function(r){return t.filter(t.db.table(2).fetchDesc([[[e[0]]],"queueNameTaskId"]),function(t){return t.queueName===e[0]&&t.context===n[2]&&t.taskValue===e[2]}).next().then(function(e,r){var o=e.done,a=e.value;return o?n[3]=t.i64.cast([-1,4294967295]):(r=a.item,n[3]=r.taskId)})},function(r){return n[5]=" ",(function(e){t.logger(e).info(e)})(["LightSpeed NewTask",n[5],"task_id:",n[5],t.i64.to_string(n[3]),n[5],"queue_name:",n[5],e[0],n[5],"task_label:",n[5],n[2]].join(""))}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreIssueNewTaskStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSIssueNewTaskAndGetTaskID",["LSIssueNewTask","LSLogEventAnnotate.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(r){return t.storedProcedure(n("LSIssueNewTask"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10])},function(n){return r[3]=t.i64.to_string(e[1]),t.filter(t.db.table(2).fetchDesc([[[e[0]]],"queueNameTaskId"]),function(t){return t.queueName===e[0]&&t.context===r[3]&&t.taskValue===e[2]}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([-1,4294967295]):(n=a.item,r[0]=n.taskId)})},function(o){return r[2]=new t.Map,r[2].set("task_id",r[0]),r[2].set("task_queue_name",e[0]),r[2].set("task_label",r[3]),t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,23]),t.i64.cast([0,0]),r[2])},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreIssueNewTaskAndGetTaskIDStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpsertInboxThreadsRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(198).put({syncGroup:e[0],minLastActivityTimestampMs:e[1],hasMoreBefore:e[2],isLoadingBefore:e[3],minThreadKey:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertInboxThreadsRangeStoredProcedure",e.__tables__=["inbox_threads_ranges"],a.exports=e}),null);
__d("LSUpsertSyncGroupThreadsRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(220).put({syncGroup:e[0],parentThreadKey:e[1],minLastActivityTimestampMs:e[2],hasMoreBefore:e[3],isLoadingBefore:e[4],minThreadKey:e[5]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertSyncGroupThreadsRangeStoredProcedure",e.__tables__=["sync_group_threads_ranges"],a.exports=e}),null);
__d("MAWCurrentUser",["CurrentUserInitialData","FBLogger","IGDWebUtils","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var e=Number(u());return e===772021112871879||e===0x7e36f3fcc43bc||e===256281040558?_():o("IGDWebUtils").isInstagramWebSupportedApp(e)?p():_()}function u(){return(e||(e=o("CurrentUserInitialData"))).APP_ID}function c(){return r("gkx")("24028")}function d(){return!!(e||(e=o("CurrentUserInitialData"))).IS_EMPLOYEE}function m(){return!!(e||(e=o("CurrentUserInitialData"))).IS_TEST_USER}function p(){var t,n;return((t=(e||(e=o("CurrentUserInitialData"))).IG_USER_EIMU)!=null?t:"0")==="0"&&r("FBLogger")("messenger_web").warn("EIMU is null"),(n=(e||(e=o("CurrentUserInitialData"))).IG_USER_EIMU)!=null?n:"0"}function _(){if((e||(e=o("CurrentUserInitialData"))).USER_ID==="0"){var t=u();r("FBLogger")("messenger_web").warn("FBID is null with appId %s",t)}return(e||(e=o("CurrentUserInitialData"))).USER_ID}l.getID=s,l.getAppID=u,l.isTlcPublicUser=c,l.isEmployee=d,l.isTestUser=m}),98);
__d("MAWMICSchema",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(1056839232,"112"),s={process_offline_queue_end:"process_offline_queue_end",maw_init_end:"maw_init_end",ls_init_end:"ls_init_end",thread_mapping_end:"thread_mapping_end",thread_mapping_start:"thread_mapping_start",ls_sync_end:"ls_sync_end",backend_setup_ready:"backend_setup_ready",occamadillo_thread_mapping_txn_reached:"occamadillo_thread_mapping_txn_reached",occamadillo_thread_mapping_txn_passed_bulk_get:"occamadillo_thread_mapping_txn_passed_bulk_get",occamadillo_thread_mapping_txn_loaded_participants_and_msgs:"occamadillo_thread_mapping_txn_loaded_participants_and_msgs"},u={occamadilloCallingSources:"occamadilloCallingSources",occamadilloBulkBatchSizes:"occamadilloBulkBatchSizes",occamadilloBatchesSentToWorker:"occamadilloBatchesSentToWorker",occamadilloDuplicateThreads:"occamadilloDuplicateThreads",occamadilloPendingThreadsAfterInitSync:"occamadilloPendingThreadsAfterInitSync"};l.EVENT=e,l.POINTS=s,l.ANNOTATIONS=u}),98);
__d("MWQPLJoinId",["guid"],(function(t,n,r,o,a,i,l){"use strict";var e=r("guid")(),s=!1;l.MWQPLJoinId=e,l.allowJoinId=s}),98);
__d("SharedWorkerUtils",["WorkerConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("WorkerConfig").worker==="shared"&&"SharedWorker"in t&&typeof t.SharedWorker=="function"}l.isSharedWorkerSupported=e}),98);
__d("WAHex",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=16,s=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],u=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(s[r>>4],s[r&15])}return String.fromCharCode.apply(String,t)}function d(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(u[r>>4],u[r&15])}return String.fromCharCode.apply(String,t)}function m(e){var t=_(e);if(t.length%2!==0)throw r("err")('parseHex given hex "'+t+'" which is not a multiple of 8-bits.');for(var n=new Uint8Array(t.length>>1),o=0,a=0;o<t.length;o+=2,a++)n[a]=p(t,o)<<4|p(t,o+1);return n.buffer}function p(e,t){var n=e.charCodeAt(t);return n<=57?n-48:n<=70?10+n-65:10+n-97}function _(e){if(/[^0-9a-fA-F]/.test(e))throw r("err")('"'+e+'" is not a valid hex');return e}function f(e){var t=e.buffer;return e.byteOffset===0&&e.length===t.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.length)}function g(e){for(var t=!0,n=e.length;t&&n;){var r=e[--n];t=32<=r&&r<127}return t?JSON.stringify(String.fromCharCode.apply(String,e)):c(e)}function h(t,n){n===void 0&&(n=!1);var r=_(t);return E(r,e),(n?"-":"")+"0x"+C(r,e)}function y(e,t,n){n===void 0&&(n=!1);var r=k(e),o=k(t);return(n?"-":"")+"0x"+r+o}function C(e,t){for(var n=t-e.length,r=e,o=0;o<n;o++)r="0"+r;return r}function b(e){var t=e<0,n=t?(-e).toString(16):e.toString(16);return h(n,t)}function v(e){return e.substring(e.indexOf("0x")+2)}function S(e){return e[0]==="-"}function R(e,t){var n=S(e),r=S(t);if(n!==r)return!n;var o=v(e)>v(t);return n?!o:o}function L(e){return S(e)?e.slice(1):"-"+e}function E(e,t){if(e.length>t)throw r("err")('"'+e+'" is longer than '+t*4+" bits.")}function k(e){if(e>4294967295||e<-4294967296)throw r("err")("uint32ToLowerCaseHex given number over 32 bits");var t=(e>=0?e:4294967296+e).toString(16);return C(t,8)}l.NUM_HEX_IN_LONG=e,l.HEX_LOWER=u,l.toHex=c,l.toLowerCaseHex=d,l.parseHex=m,l.hexAt=p,l.hexOrThrow=_,l.bytesToBuffer=f,l.bytesToDebugString=g,l.createHexLong=h,l.createHexLongFrom32Bits=y,l.hexLongFromNumber=b,l.hexLongToHex=v,l.hexLongIsNegative=S,l.isBiggerHexLong=R,l.negateHexLong=L}),98);
__d("WALoggerUtils",["WAHex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(typeof e=="string")return"'"+e+"'";if(e==null||typeof e!="object")return String(e);if(Array.isArray(e))return"["+e.join(",")+"]";if(e instanceof Uint8Array){if(e.length<64)return"<<"+s(e)+">>";var t=e.subarray(0,32);return"<<"+s(t)+", "+(e.length-t.length)+" more bytes>>"}else return e instanceof Error?e.name?"("+e.name+")":"":e.toString===Object.prototype.toString?JSON.stringify(e,function(e,t){return e?String(t):t}):String(e)}function s(e){for(var t=!0,n=e.length;t&&n;){var r=e[--n];t=32<=r&&r<127}return t?JSON.stringify(String.fromCharCode.apply(String,e)):o("WAHex").toHex(e)}function u(t,n){var r=[t[0]];return n.forEach(function(n,o){r.push(e(n),t[o+1])}),r.join("")}function c(e){return e}function d(e){return e*100+"%"}l.debugStr=e,l.bytesToDebugString=s,l.rebuildTemplate=u,l.dynamicLoggingSampling=c,l.loggingSamplingAsString=d}),98);
__d("WATagsLogger",["Promise","WALoggerUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=new(s||(s=n("Promise")))(function(e){u=e});function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c}),m.apply(this,arguments)}var p=null;function _(e){p=e,u==null||u(),u=null}var f={count:function(){},debug:function(){},info:function(){},logRestricted:function(){},warn:function(){},error:function(){},devConsole:function(){}};function g(){return p==null?f:p}function h(e){return{TAGS:function(n){return h([].concat(e,n))},COUNT:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"COUNT",template:n,expressions:r,logString:i};return g().count(i,e,l),y(l)},DEV:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"DEV",template:n,expressions:r,logString:i};return g().debug(i,e,l),y(l)},DEV_XMPP:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"DEV_XMPP",template:n,expressions:r,logString:i};return g().logRestricted(i,e,l),y(l)},LOG:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"LOG",template:n,expressions:r,logString:i};return g().info(i,e,l),y(l)},WARN:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"WARN",template:n,expressions:r,logString:i};return g().warn(i,e,l),y(l)},ERROR:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"ERROR",template:n,expressions:r,logString:i},s=void 0;for(var u of r)if(u instanceof Error){s=u;break}return s!=null?g().error(i,e,s,l):g().error(i,e,void 0,l),y(l)},CATCHING:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"CATCHING",template:n,expressions:r,logString:i};return g().error(i,e,void 0,l),y(l)},EXPECTED_ERROR:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=o("WALoggerUtils").rebuildTemplate(n,r),l={level:"ERROR",template:n,expressions:r,logString:i,tags:[].concat(e)};return y(l)}}}function y(t){return{verbose:function(){return t.verbose=!0,y(t)},color:function(n){return t.color=n,y(t)},devConsole:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=g()).devConsole.apply(e,[t.level,t.logString,[]].concat(r)),y(t)},sendLogs:function(r,o){if(g().sendLogs!=null){var n,a;t.sendLogs={reason:r,sampling:o==null?void 0:o.sampling,sendLogsType:o==null?void 0:o.sendLogsType,separateEmployeeLog:o==null?void 0:o.separateEmployeeLog,employeeSampling:o==null?void 0:o.employeeSampling},(n=(a=g()).sendLogs)==null||n.call(a,t)}else if(t.level!=="ERROR"&&t.level!=="CATCHING")return h([]).ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[","] ",""])),r,t.logString);return y(t)},tags:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(t.tags=n,g().tags!=null){var o,a;(o=(a=g()).tags)==null||o.call(a,n)}return y(t)},expect:function(n){var e,r,o,a,i,l;if(t.level!=="ERROR")return y(t);var s=void 0;for(var u of t.expressions)if(u instanceof Error){s=u;break}var c=(e=(r=(o=s)==null?void 0:o.message)!=null?r:(a=s)==null?void 0:a.name)!=null?e:(i=s)==null?void 0:i.description;for(var d of n)if(c!=null&&c.includes(d)){var m;return g().error(t.logString,[].concat((m=t.tags)!=null?m:[],["expected-error-log"]),s!=null?s:void 0,t),y(t)}return g().error(t.logString,(l=t==null?void 0:t.tags)!=null?l:[],s!=null?s:void 0,t),y(t)},catching:function(n){return t.expressions.push(n),y(t)}}}l.whenReady=d,l.initializeWaLogger=_,l.TAGS=h,l.getWaLoggerAdditionalOptions=y}),98);
__d("WALogger",["$InternalEnum","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["UNCAUGHT_EXCEPTION_SAD","UNHANDLED_REJECTED_PROMISE_SAD","CRASH_OR_UNRECOVERABLE_ERROR_SAD","USER_FORCEFULLY_LOGGED_OUT_SAD","PERFORMANCE_OBSERVER_LONGTASK_SAD","UNCATEGORIZED_SAD","EXTREMELY_BAD_USER_EXPERIENCE_SAD","UNCAUGHT_EXCEPTION","UNHANDLED_REJECTED_PROMISE","MINOR_ISSUE","INVESTIGATION","COUNTING_STAT","UNCATEGORIZED"]),s=new Set([e.UNCATEGORIZED_SAD,e.UNCAUGHT_EXCEPTION_SAD,e.UNHANDLED_REJECTED_PROMISE_SAD,e.CRASH_OR_UNRECOVERABLE_ERROR_SAD,e.USER_FORCEFULLY_LOGGED_OUT_SAD,e.EXTREMELY_BAD_USER_EXPERIENCE_SAD,e.PERFORMANCE_OBSERVER_LONGTASK_SAD]),u=o("WATagsLogger").TAGS([]),c=u.COUNT,d=u.DEV,m=u.DEV_XMPP,p=u.ERROR,_=u.EXPECTED_ERROR,f=u.LOG,g=u.WARN;l.SendLogsType=e,l.SadSendLogsTypes=s,l.COUNT=c,l.DEV=d,l.DEV_XMPP=m,l.ERROR=p,l.EXPECTED_ERROR=_,l.LOG=f,l.WARN=g}),98);
__d("WADynamicRouterAsync",["Promise","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={sentinel:"RESPONSE_NAMESPACE"},c={sentinel:"NOT_HANDLED"},d=(function(){function t(){var e=this;this.$2=(s||(s=n("Promise"))).resolve(),this.$3=new Map,this.$4=0,this.$5=null,this.$6=null,this.$7=null,this.fireAndForget=function(t,n,r,o){o===void 0&&(o=!1),e.$9(t,n,r,null,o)},this.sendAndReceive=function(t,r,o,a){return a===void 0&&(a=!1),new(s||(s=n("Promise")))(function(n,i){var l=null;e.$9(t,r,o,function(t){try{var r=_(t);r?l=r.call(t,function(t){e.$9(u,"",t,n,a)},function(t){e.$9(u,"",t,i,!1)}):e.$9(u,"",t,n,a)}catch(t){e.$9(u,"",t,i,!1)}},a)})},this.$8=function(){var t=e.$6;if(t){for(var n=e.$3,r;t&&!(r=m(n,t));)e.$6=t=t.nextRoute;if(!(!t||!r)){var o=e.$10(r,t),a=!0;if(o!==c){var i=t.prevRoute,l=t.nextRoute;e.$6===t&&(e.$6=l),i?i.nextRoute=l:e.$5=l,l?l.prevRoute=i:(a=!1,e.$7=i)}return a&&e.$2.then(e.$8).finally(function(){}),o}}}}var a=t.prototype;return a.setAckPayload=function(t){this.$1=t},a.getAckPayoad=function(){return this.$1},a.hasHandlerForNamespace=function(t){return this.$3.has(t)},a.getHandledNamespaces=function(){return Array.from(this.$3.keys())},a.setNamespaceHandler=function(t,n){var e=this.$3,r=e.get(t);if(r!==n&&(++this.$4,e.set(t,n),!r)){var o=this.$5;o&&(this.$6||this.$2.then(this.$8).finally(function(){}),this.$6=o)}},a.setHandlers=function(n,a){function t(t,i,l){if(a[t]==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""])),t,n),r("err")(t+" is not defined for "+n);var s=a[t](i);l&&l(s)}this.setNamespaceHandler(n,t)},a.$9=function(t,n,r,o,a){var e=this.$7,i={namespace:t,route:n,arg:r,resolver:o,prevRoute:e,nextRoute:null,silentLog:a};this.$7=i;var l=!0;e?(e.nextRoute=i,l=!this.$6):this.$5=i,l&&m(this.$3,i)&&(this.$6=i,this.$2.then(this.$8).finally(function(){}))},a.$10=function(t,o){var e=o.arg,a=o.resolver,i=o.route,l=o.silentLog,u=this.$4,d=null,m=null;try{d=t(i,e,a,l)}catch(e){m=(s||(s=n("Promise"))).reject(e)}if(d===c)if(u===this.$4)m=(s||(s=n("Promise"))).reject(r("err")("DynamicRouter: NOT_HANDLED can only be used when updating handlers"));else return c;if(a){m&&a(m);return}else return m},t})();function m(e,t){var n=t.namespace;return n===u?p:e.get(n)}function p(e,t,n){n(t)}function _(e){if(e!=null&&(typeof e=="object"||typeof e=="function")){var t=e.then;return typeof t=="function"?t:null}return null}l.NOT_HANDLED=c,l.DynamicRouter=d}),98);
__d("WABridge",["WADynamicRouterAsync","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){e==null&&(e=t)}function u(){return e==null&&(e=new(o("WADynamicRouterAsync")).DynamicRouter),e}function c(e){throw r("err")("setBridge is only for tests")}l.makeWABridge=s,l.getBridge=u,l.setBridge__TESTS_ONLY=c}),98);
__d("WAResultOrError",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t!=null?{success:!1,error:e,payload:t}:{success:!1,error:e}}function l(e){return{success:!0,value:e}}function s(e){return{success:!1,error:e}}i.DEPRECATED_makeError=e,i.makeResult=l,i.makeError=s}),66);
__d("WAExceededStorageQuota",["Promise","WABridge","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=typeof importScripts=="function",u=!1,c=new Set;function d(){return u}function m(e){u=e,s&&o("WABridge").getBridge().fireAndForget("event","storageQuota",{exceededStorageQuota:u}),c.forEach(function(t){return t(e)})}function p(e){return c.add(e),function(){return c.delete(e)}}function _(e){if(e!=null&&(e instanceof Error&&v(e)||(e==null?void 0:e.inner)instanceof Error&&v(e.inner))){m(!0);return}}function f(e){e.addEventListener("abort",function(e){var t=e.target.error;v(t)&&m(!0)})}var g="storage_quota_check",h="storage_quota_check_store",y="storage_quota_check_key";function C(){return new(e||(e=n("Promise")))(function(e){var t=indexedDB.open(g);t.onerror=function(t){var n=b(t.target.error,"db-open-failure");e(n)},t.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore(h)},t.onsuccess=function(t){var n=t.target.result,r=n.transaction([h],"readwrite");r.oncomplete=function(){e(o("WAResultOrError").makeResult("storage-quota-sufficient"))},r.onerror=function(t){var n=b(t.target.error,"transaction-failure");e(n)},r.onabort=function(t){var n=b(t.target.error,"transaction-abort");e(n)};var a=r.objectStore(h),i=new Blob([new Uint8Array(1024)]),l=a.add(i,y);l.onerror=function(t){var n=b(t.target.error,"write-faiure");e(n)},l.onsuccess=function(){var t=a.delete(y);t.onerror=function(t){var n=b(t.target.error,"delete-failure");e(n)},t.onsuccess=function(){}}}})}function b(e,t){return v(e)?(m(!0),o("WAResultOrError").makeResult("storage-quota-exceeded")):o("WAResultOrError").makeError(t)}function v(e){if(e==null)return!1;if(e instanceof self.DOMException){var t=e.code,n=e.name;return t===22||t===1014||n==="QuotaExceededError"||n==="NS_ERROR_DOM_QUOTA_REACHED"}return!1}l.getExceededStorageQuota=d,l.setExceededStorageQuota=m,l.subscribe=p,l.checkQuotaExceededError=_,l.listenToQuotaExceededError=f,l.checkStorageQuota=C}),98);
__d("WAPromiseCacheWithTtl",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=0,r=null;return function(){var o=Date.now();return r!=null&&o-n<=e||(n=o,r=t()),r}}i.cacheWithTtl=e}),66);
__d("WAStorageEstimator",["Promise","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return navigator.storage!=null&&typeof navigator.storage.estimate=="function"?navigator.storage.estimate().then(function(e){return o("WAResultOrError").makeResult(e)}).catch(function(e){return o("WAResultOrError").makeError({type:"runtime-error",runtimeError:e})}):(e||(e=n("Promise"))).resolve(o("WAResultOrError").makeError({type:"not-support"}))}l.estimateStorage=s}),98);
__d("WAGetStorageQplAnnotations",["Promise","WAExceededStorageQuota","WALogger","WAPromiseCacheWithTtl","WAStorageEstimator"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=6e4,d=1e3*60*5,m=o("WAPromiseCacheWithTtl").cacheWithTtl(c,o("WAStorageEstimator").estimateStorage),p=o("WAPromiseCacheWithTtl").cacheWithTtl(d,o("WAExceededStorageQuota").checkStorageQuota);function _(){return(u||(u=n("Promise"))).all([m(),p()]).then(function(t){var n=t[0],r=t[1];n.success||n.error.type==="not-support"||(n.error.type,o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to get storage info. runtime-error: ",""])),n.error.runtimeError));var a=n.success?n.value:{},i=a.quota,l=a.usage,s=a.usageDetails;return{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota()},int:{storageCache:s==null?void 0:s.caches,storageIndexedDB:s==null?void 0:s.indexedDB,storageQuota:i,storageServiceWorkerRegistrations:s==null?void 0:s.serviceWorkerRegistrations,storageUsage:l}}}).catch(function(e){throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to get storage info. unexpected-runtimer-error: ",""])),e),e})}l.getStorageQplAnnotations=_}),98);
__d("WANullthrows",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t===void 0&&(t="?"),e==null)throw r("err")("Unexpected null or undefined: "+t);return e}l.default=e}),98);
__d("WAOdsEnums",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({WA_CONNECTIVITY:"wa_connectivity",SPAM_REPORT:"wmi_spam_report",DECRYPTION:"armadillo_msg_decryption",DEVICE_REREG_CHECK:"armadillo_device_rereg_check",DEVICE_REGISTRATION:"armadillo_device_registration",DEVICE_REGISTRATION_NON_EMPLOYEE:"armadillo_device_registration_non_employee",PHASH_MISMATCH:"phash_mismatch",WEB_PLACEHOLDER:"armadillo_web_placeholder",PREKEY_UPLOAD:"armadillo_prekey_upload",PREKEY_DIGEST:"armadillo_prekey_digest",C2C_META_SYNC:"armadillo_c2c_meta_sync",ADMIN_MESSAGE:"armadillo_admin_message",PREVIEW_SNIPPET:"armadillo_snippet",TOTAL_INCOMING_MESSAGE:"armadillo_total_incoming_message",COMPARE_IDENTITY:"armadillo_compare_identity",GET_PREKEY:"armadillo_get_prekey",SECURITY_ALERT_FOR_CONTACT:"armadillo_security_alert_for_contact",SECURITY_ALERT_FOR_SELF:"armadillo_security_alert_for_self",MSG_SEND:"armadillo_message_send",RETRY_MISSING_MSG:"armadillo_retry_missing_msg",REGISTRATION_TYPE:"aramdillo_registration_type",CLOCK_SKEW_UPDATE:"clock_skew_update",STREAM_ERROR:"wajs_stream_error",ICDC:"wajs_icdc",LOAD_MORE_NO_ORIGINAL_MSG_IN_MAW:"load_more_no_original_msg_in_maw",POISON_QUEUE_ENTTITY:"armadillo_poison_queue_entity",PQ_MIGRATION:"wajs_pq_migration",WORM:"wajs_worm",CAT_ROTATION:"cat_rotation",EB_RESTORE:"eb_restore",EB_UPLOAD:"eb_upload",WA_REREGISTRATION:"wa_reregistration",EB_SWITCH_STATE:"eb_switch_state",EB_MESSAGE_PROBE:"eb_message_probe",EB_CLIENT_STATE_CHECK:"eb_client_state_check",EB_RECOVERY_CODE_DB:"eb_recovery_code_db",AUTOMATIC_EB:"automatic_eb",MAW_BRIDGE:"maw_bridge",WA_DISCONNECT:"armadillo_disconnect",GROUP_CREATE:"armadillo_group_create",GROUP_DELETE:"armadillo_group_delete",GROUP_ADD_PARTICIPANT:"armadillo_group_add_participant",GROUP_PROMOTE_PARTICIPANT:"armadillo_group_promote_participant",GROUP_DEMOTE_PARTICIPANT:"armadillo_group_demote_participant",GROUP_REMOVE_PARTICIPANT:"armadillo_group_remove_participant",GROUP_LEAVE_PARTICIPANT:"armadillo_group_leave_participant",GROUP_REVOKE_PARTICIPANT_INVITE:"armadillo_group_revoke_participant_invite",GROUP_SKS_INVALID:"armadillo_group_sks_invalid",GROUP_SET_MEMBER_ADD_MODE:"armadillo_group_set_member_add_mode",OPEN_GROUP_ADD_PARTICIPANT:"open_group_add_participant",SEND_READ_RECEIPTS:"armadillo_send_read_receipts",MESSAGE_MISSING_THREAD_JID:"MESSAGE_MISSING_THREAD_JID",MESSAGE_MISSING:"MESSAGE_MISSING",MAW_NON_TIMEOUT:"maw_non_timeout",MAW_TIMEOUT:"maw_timeout",WA_FAIL_STANZA_QUEUE_ITEM:"wa_fail_stanza_queue_item",MAW_MISMATCH_PARTICIPANT:"maw_mismatch_participant",MAW_ONE_TO_ONE_THREAD_PARTICIPANT_CLEANUP:"maw_one_to_one_thread_participant_cleanup",MAW_THREADID_DEPRECATION:"maw_threadid_deprecation",MAW_THREADID_DEPRECATION_DETAILS:"maw_threadid_deprecation_details",MAW_DELETE_DANGLING_PARTICIPANTS:"maw_delete_dangling_participants",S2S_QPL_MISSING_INSTANCE_KEY:"s2s_qpl_missing_instance_key",MAW_DEPRECATED_REDIRECT:"maw_deprecated_redirect",MAW_MUTATION_VALIDATOR:"maw_mutation_validator",MAW_THREAD_UPDATE_MIDDLEWARE:"maw_thread_update_middleware",MAW_THREADLIST_ITEM_UPDATE:"maw_threadlist_item_update",MAW_THREAD_BUMPED_V2:"maw_thread_bumped_v2",MAW_MY_USER_JID_GETTER:"maw_my_user_jid_getter",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key",WA_LONG_SESSION_DROP:"wa_long_session_drop",MAW_PROTOCOL_MSG_ID_INDEX:"maw_protocol_msg_id_index",MAW_DUPLICATE_MSGS:"maw_duplicate_msgs",MAW_LS_SYNC_IMPROVEMENTS:"maw_ls_sync_improvements",MAW_DELETE_DB_ON_LOGOUT:"maw_delete_db_on_logout",MAW_VAULTING:"maw_vaulting",MAW_SEND_REACTION:"maw_send_reaction",MAW_OLD_MESSAGE_SEND:"maw_old_message_send",MAW_MIGRATE_REACTION_TS_AS_INDEX:"maw_migrate_reaction_ts_as_index",MAW_TC_MS5_OPEN_SNIPPET:"maw_tc_ms5_open_snippet",MAW_S2S_INSTANCE_KEY_NULL:"maw_s2s_instance_key_null",MAW_XMA_PROTOCOL_PARSING:"maw_xma_protocol_parsing",IGDW_INSTAMADILLO_MESSAGE_ON_OLD_WORKER:"igdw_new_msg_old_worker",WORKER_SCHEDULER_STUCK:"worker_scheduler_stuck",MAW_DB_UNEXPECTED_VERSION:"maw_db_unexpected_version",MAW_DB_MIGRATION_CURRENT_VERSION:"maw_db_migration_current_version",MAW_MEDIA_DB_DUPLICATE_MEDIA:"maw_media_db_duplicate_media",MAW_MEDIA_DB_DUPLICATE_CHUNK:"maw_media_db_duplicate_chunk",MAW_MEDIA_MISMATCH_HASHED_PLAINTEXT_HASH:"maw_media_mismatch_hashed_plaintext_hash",MAW_EB_DECODE_MESSAGE_PROTOBUF_SUPPLEMENTAL:"maw_eb_decode_message_protobuf_supplemental",MAW_THREAD_GET_NEWEST_REACTION_BATCH_NUM:"maw_thread_get_newest_reaction_batch_num",MAW_THREAD_MAPPING:"maw_thread_mapping",WA_PROTOCOL_QUEUE_NOTIFICATION:"wa_protocol_queue_notification",MPS_THREAD_SNIPPET_CONSISTENCY:"mps_thread_snippet_consistency"});i.Entity=e}),66);
__d("WAResolvable",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(){var t=this;this.$1=function(){},this.$2=!1,this.isSettled=!1,this.promise=new(e||(e=n("Promise")))(function(e){t.$1=e})}var r=t.prototype;return r.resolve=function(t){this.$2=!0,this.isSettled=!0,this.$1(t)},r.reject=function(r){this.isSettled=!0,this.resolve((e||(e=n("Promise"))).reject(r))},r.resolveWasCalled=function(){return this.$2},t})();i.Resolvable=l}),66);
__d("WATimeUtils",["Promise","WAHex"],(function(t,n,r,o,a,i,l){"use strict";var e,s=60,u=5*s,c=60*s,d=24*c,m=7*d,p=365*d,_=60*1e3,f=c*1e3,g=24*f,h=7*g,y=1<<31,C=~y,b=y+1,v={time:0,day:-4},S=0;function R(){return S}function L(e){S=e}function E(e){return te(e).toUTCString()}function k(e){var t=e|0;return Math.max(b,Math.min(t,C))}function I(e){return k(e/1e3)}function T(e){return typeof e!="number"?o("WAHex").hexLongIsNegative(e)?b:C:k(e)}function D(e){return typeof e!="number"?o("WAHex").hexLongIsNegative(e)?b:C:e}function x(e){return e==null?e:e>C?I(e):k(e)}function $(){return oe()-S*1e3}function P(e){return e}function N(e){return e}function M(e){return e*1e3}function w(e,t){return A(V(),e,t)}function A(e,t,n){var r=Math.max(t+n-e,0);return Math.min(1e3*r,~(1<<31))}function F(e,t){var n=t!=null?t:V();return k(Math.ceil(n+Math.max(e,0)))}function O(e,t){var n=t!=null?t:V();return k(Math.ceil(n-Math.max(e,0)))}var B=Math.pow(2,48);function W(e){return e>=B?$()+6e4:e}function q(e){var t=Math.max(e-V(),0);return Math.min(1e3*t,~(1<<31))}function U(t){var r=q(t);return new(e||(e=n("Promise")))(function(e){return void setTimeout(e,r)})}function V(){return k(Date.now()/1e3-S)}function H(){return k(Date.now()/1e3)}function G(){return k(new Date().setHours(0,0,0,0)/1e3-S)}function z(){return Date.now()-S*1e3}function j(e){return Math.max(e-V(),0)}function K(e){return j(e)>0}function Q(){return performance.now()}function X(e){return Math.floor(performance.now()-e)}function Y(e,t){return e<t?e:t}var J=(function(){function e(){var e=Q();this.$1=e,this.$2=e}var t=e.prototype;return t.reset=function(){this.$2=Q()},t.elapsed=function(){return X(this.$2)},t.cumulative=function(){return X(this.$1)},e})();function Z(e,t,n){return Math.abs(e-t)<=n}function ee(e,t){return Z(V(),e,t)}function te(e){return new Date(e*1e3)}function ne(e,t){if(Math.abs(e-t)>d)return!1;var n=v.time===e?v.day:te(e+S).getDay(),r=v.time===t?v.day:te(t+S).getDay();return v.time=t,v.day=r,n===r}function re(e){var t=Number.parseInt(e,16);return Number.isFinite(t)?new Date(k(t)*1e3):null}function oe(){return Date.now()}function ae(e){var t=new Date(e);return isNaN(t)?null:I(t.getTime())}function ie(e,t){var n=Math.abs(e-t);return Math.ceil(n/g)}function le(e){var t=864e5,n=new Date(e.getTime()),r=n.getUTCDay()||7;n.setUTCDate(n.getUTCDate()+4-r);var o=new Date(Date.UTC(n.getUTCFullYear(),0,1)),a=Math.ceil(((n.getTime()-o.getTime())/t+1)/7);return a}l.MINUTE_SECONDS=s,l.FIVE_MINUTES=u,l.HOUR_SECONDS=c,l.DAY_SECONDS=d,l.WEEK_SECONDS=m,l.YEAR_SECONDS=p,l.MINUTE_MILLISECONDS=_,l.HOUR_MILLISECONDS=f,l.DAY_MILLISECONDS=g,l.WEEK_MILLISECONDS=h,l.DEFAULT_UNIXTIME=y,l.MAX_INT=C,l.getClockSkew=R,l.setClockSkew=L,l.toHttpHeaderDate=E,l.castToUnixTime=k,l.castMilliSecondsToUnixTime=I,l.castLongIntToUnixTime=T,l.castLongIntToMillisTime=D,l.castMillisTimeToUnixTime=x,l.millisTime=$,l.castToMillisTime=P,l.fromMillisTime=N,l.castUnixTimeToMillisTime=M,l.timeoutFor=w,l.timeoutForAt=A,l.futureUnixTime=F,l.pastUnixTime=O,l.miAdjustTimestamp=W,l.cappedMillisecondsUntil=q,l.delayUntil=U,l.unixTime=V,l.unixTimeWithoutClockSkewCorrection=H,l.midnight=G,l.unixTimeMs=z,l.secondsUntil=j,l.isInFuture=K,l.monotonicTime=Q,l.monotonicTimeSince=X,l.oldest=Y,l.MonotonicTimer=J,l.happenedWithinAt=Z,l.happenedWithin=ee,l.toDate=te,l.sameDay=ne,l.convertHexToDate=re,l.performanceAbsoluteNow=oe,l.convertISO8601DateFormatToUnixTime=ae,l.daysDiff=ie,l.weekOfYear=le}),98);
__d("getSafeQplErrorMessage",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return"<null>";if(e.messageFormat!=null&&typeof e.messageFormat=="string"&&e.messageParams!=null&&Array.isArray(e.messageParams))try{return l.apply(void 0,[e.messageFormat].concat(e.messageParams))}catch(e){}return e instanceof Error||typeof e=="string"?e.toString():"<unknown>"}function l(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0;return e.replace(/%s/g,function(){return String(n[o++])})}i.getSafeQPLErrorMessage=e}),66);
__d("shouldUseMAWSharedWorker",["SharedWorkerUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("SharedWorkerUtils").isSharedWorkerSupported()}l.shouldUseMAWSharedWorker=e}),98);